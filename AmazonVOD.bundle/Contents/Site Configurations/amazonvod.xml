<?xml version="1.0" encoding="UTF-8"?>
<site site="http://.*\.amazon\.com"
    plugin="http://.*\.images-amazon\.com/images/G/01/digital/video/streaming/.*?/UnboxScreeningRoomClient\._.*?\.swf"
    initialState="playing"
    windowHeight="720"
    windowWidth="1280"
	version="1.0">

	<crop x="0" y="0" width="0" height="0" />

    <seekbar type="simple">
      <dead x="100" y="100" />
      <played>
      </played>
    </seekbar>

    <state name="playing">
        <event>
            <condition>
                <and>
                    <command name="pause"/>
                </and>
            </condition>
            <action>
            <!-- this totally works but there is no javascript control to unpause =(
                <run script="$.pauseCurrentItem()"/>
            -->
                <click x="25" y="-25"/>
                <type key="32" />
                <goto state="paused" />
            </action>
        </event>
        <!-- look for a white pixel at a certain point and assume it's the watch rental now button: click it! -->
        <event>
            <condition>
                <color x="665" y="293" rgb="ffffff"/>
            </condition>
            <action>
                <click x="665" y="293"/>
                <pause time="100"/>
            </action>
        </event>
    </state>
    
	<state name="paused">
		<event>
          <condition>
                <command name="play"/>
          </condition>
          <action>
                <click x="25" y="-25"/>
                <type key="32" />
                <goto state="playing" />
          </action>
        </event>
	</state>
</site>
